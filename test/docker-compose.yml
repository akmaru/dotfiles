version: "3.9"

x-ubuntu: &ubuntu_common
  volumes:
    - ../:/home/developer/dotfiles
  environment:
    - TERM=xterm-256color
  working_dir: /home/developer
  command: bash
  stdin_open: true
  tty: true

services:
  ubuntu22.04:
    image: ghcr.io/akmaru/dotfiles:ubuntu22.04
    build:
      context: .
      dockerfile: ubuntu.Dockerfile
      args:
        - BASE_IMAGE=ubuntu:22.04
        - UID=${HOST_UID}
        - GID=${HOST_GID}
    <<: *ubuntu_common

  ubuntu24.04:
    image: ghcr.io/akmaru/dotfiles:ubuntu24.04
    build:
      context: .
      dockerfile: ubuntu.Dockerfile
      args:
        - BASE_IMAGE=ubuntu:24.04
        - UID=${HOST_UID}
        - GID=${HOST_GID}
    <<: *ubuntu_common
